import{c as b,r as a,a as L,m as M,u as T,g as I,b as O,j as e,n as B,B as U}from"./index-FgfazPn4.js";import{I as v}from"./input-Cc5DIsqr.js";import{E as _}from"./eye-BJula9yD.js";import{L as F}from"./loader-circle-HvrrQJfJ.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=b("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=b("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),J=()=>{const[c,j]=a.useState(""),[d,N]=a.useState(""),[l,k]=a.useState(!1),[m,h]=a.useState(!1),{signIn:E,user:u,userProfile:i,userProfileLoading:x}=L();M();const{toast:s}=T(),r=I();O(),a.useEffect(()=>{if(u&&!x&&i){console.log("🔄 User authenticated, checking role-based redirect");const t=i.role;switch(console.log("👤 User role:",t),t){case"admin":case"sales_admin":console.log("🏠 Admin user - redirecting to admin route"),r("/admin",{replace:!0});break;case"client":console.log("🏠 Client user - redirecting to home route"),r("/",{replace:!0});break;default:console.log("🚫 User role - redirecting to user route"),r("/user",{replace:!0});break}}},[u,i,x,r]);const A=async t=>{t.preventDefault(),h(!0);try{const{error:o}=await E(c,d);o&&s({title:"Authentication Error",description:o.message,variant:"destructive"})}catch{s({title:"Error",description:"An unexpected error occurred",variant:"destructive"})}finally{h(!1)}},S=async()=>{try{const t=await fetch("/apk/");if(!t.ok)throw new Error("Could not access APK directory");const p=[...(await t.text()).matchAll(/href="(app-release-v[0-9.]+-\d+_\d+\.apk)"/g)];if(!p.length){s({title:"Download Error",description:"No APK files found.",variant:"destructive"});return}const g=p.map(n=>n[1]);g.sort((n,P)=>{const w=D=>{const y=D.match(/-(\d{8}_\d{4})\.apk$/);return y?y[1]:""};return w(n)<w(P)?1:-1});const f=g[0];window.open(`/apk/${f}`,"_blank"),s({title:"Download Started",description:`Downloading ${f}`,variant:"default"})}catch{s({title:"Download Error",description:"Failed to download APK. Please try again.",variant:"destructive"})}},C=()=>{s({title:"Exciting News! 🎉",description:"Our TechPinoy App for iOS is still being developed. Stay tuned for the release!",variant:"default"})};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-block mb-4",children:e.jsx("img",{src:B,alt:"TechPinoy Logo",className:"h-16 w-16"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"TechPinoy App"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Sign in to your account"})]}),e.jsxs("form",{onSubmit:A,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Username"}),e.jsx(v,{id:"email",type:"email",value:c,onChange:t=>j(t.target.value),placeholder:"Enter your email",required:!0,className:"w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(v,{id:"password",type:l?"text":"password",value:d,onChange:t=>N(t.target.value),placeholder:"Enter your password",required:!0,className:"w-full pr-10"}),e.jsx("button",{type:"button",onClick:()=>k(!l),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:l?e.jsx(K,{className:"h-4 w-4"}):e.jsx(_,{className:"h-4 w-4"})})]})]}),e.jsxs(U,{type:"submit",className:"w-full",disabled:m,children:[m&&e.jsx(F,{className:"mr-2 h-4 w-4 animate-spin"}),"Sign In"]})]}),e.jsx("div",{className:"mt-6 pt-4 border-t border-gray-100",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-3",children:[e.jsx(R,{className:"h-4 w-4 text-blue-600"}),e.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:"Download TechPinoy App"})]}),e.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"Get the full experience on your mobile device"}),e.jsxs("div",{className:"flex justify-center gap-4",children:[e.jsx("button",{onClick:S,className:"p-2.5 bg-black hover:bg-gray-800 text-white rounded-full transition-colors duration-200 shadow-sm hover:shadow-md",title:"Download for Android",children:e.jsx("svg",{className:"h-5 w-5",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M17.523 15.3414c-.5511 0-.9993-.4486-.9993-.9997s.4482-.9993.9993-.9993c.5511 0 .9993.4482.9993.9993.0001.5511-.4482.9997-.9993.9997m-11.046 0c-.5511 0-.9993-.4486-.9993-.9997s.4482-.9993.9993-.9993c.5511 0 .9993.4482.9993.9993 0 .5511-.4482.9997-.9993.9997m11.4045-6.02l1.9973-3.4592a.416.416 0 00-.1521-.5676.416.416 0 00-.5676.1521l-2.0223 3.5036C15.5902 8.2432 13.8533 7.4287 11.9797 7.4287c-1.8736 0-3.6105.8145-4.8057 2.0786L5.1517 5.9995a.416.416 0 00-.5676-.1521.416.416 0 00-.1521.5676l1.9973 3.4592C2.6889 11.1867.3432 14.6589 0 18.761h23.959c-.3432-4.1021-2.6889-7.5743-6.5775-9.4396"})})}),e.jsx("button",{onClick:C,className:"p-2.5 bg-gray-800 hover:bg-gray-700 text-white rounded-full transition-colors duration-200 shadow-sm hover:shadow-md",title:"Download for iOS",children:e.jsx("svg",{className:"h-5 w-5",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M18.71 19.5c-.83 1.24-1.71 2.45-3.05 2.47-1.34.03-1.77-.79-3.29-.79-1.53 0-2 .77-3.27.82-1.31.05-2.3-1.32-3.14-2.53C4.25 17 2.94 12.45 4.7 9.39c.87-1.52 2.43-2.48 4.12-2.51 1.28-.02 2.5.87 3.29.87.78 0 2.26-1.07 3.81-.91.65.03 2.47.26 3.64 1.98-.09.06-2.17 1.28-2.15 3.81.03 3.02 2.65 4.03 2.68 4.04-.03.07-.42 1.44-1.38 2.83M13 3.5c.73-.83 1.94-1.46 2.94-1.5.13 1.17-.34 2.35-1.04 3.19-.69.85-1.83 1.51-2.95 1.42-.15-1.15.41-2.35 1.05-3.11z"})})})]})]})})]}),e.jsx("div",{className:"text-center mt-6",children:e.jsx("p",{className:"text-xs text-gray-400",children:"TechPinoy App Developed by James Chavez"})})]})})};export{J as default};
//# sourceMappingURL=Auth-B5iIUOnp.js.map
