import{r as u,j as e,D as b,d as g,e as C,f as w,B as n}from"./index-FgfazPn4.js";import{C as x}from"./checkbox-De7F5xfH.js";import{B as h}from"./badge-PQ_Xgg0c.js";import{P as I}from"./users-7LwHL_dG.js";import{C as y}from"./circle-check-big-B5GuSQz3.js";import{C as S}from"./clock-UXFbK2OM.js";const D=({isOpen:j,onClose:m,groupedTransactions:i,onImport:p,isLoading:r})=>{const[a,d]=u.useState(new Set),f=()=>{const s=i.filter(t=>!t.isImported).map(t=>t.poNumber);a.size===s.length?d(new Set):d(new Set(s))},N=(s,t)=>{if(t)return;const l=new Set(a);l.has(s)?l.delete(s):l.add(s),d(l)},o=async()=>{a.size>0&&(await p(Array.from(a)),d(new Set))},c=i.filter(s=>!s.isImported).length,v=i.filter(s=>s.isImported).length;return e.jsx(b,{open:j,onOpenChange:m,children:e.jsxs(g,{className:"max-w-4xl max-h-[80vh] overflow-hidden flex flex-col",children:[e.jsxs(C,{children:[e.jsxs(w,{className:"flex items-center gap-2",children:[e.jsx(I,{className:"h-5 w-5"}),"Import Purchase Orders from Transaction Records"]}),e.jsxs("div",{className:"flex gap-4 text-sm text-muted-foreground",children:[e.jsxs("span",{children:["Available: ",c]}),e.jsxs("span",{children:["Already Imported: ",v]}),e.jsxs("span",{children:["Selected: ",a.size]})]})]}),e.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between py-2 border-b",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(x,{checked:a.size===c&&c>0,onCheckedChange:f,disabled:c===0}),e.jsx("span",{className:"text-sm font-medium",children:"Select All Available"})]}),e.jsx(n,{onClick:o,disabled:a.size===0||r,className:"ml-auto",children:r?"Importing...":`Import Selected (${a.size})`})]}),e.jsx("div",{className:"flex-1 overflow-y-auto space-y-2 p-2",children:i.map(s=>e.jsx("div",{className:`border rounded-lg p-4 transition-colors ${s.isImported?"bg-muted/50 border-muted":a.has(s.poNumber)?"bg-primary/5 border-primary":"hover:bg-muted/30"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(x,{checked:a.has(s.poNumber),onCheckedChange:()=>N(s.poNumber,s.isImported),disabled:s.isImported,className:"mt-1"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("h3",{className:"font-medium",children:["PO: ",s.poNumber]}),s.isImported?e.jsxs(h,{variant:"secondary",className:"text-xs",children:[e.jsx(y,{className:"h-3 w-3 mr-1"}),"Imported"]}):e.jsxs(h,{variant:"outline",className:"text-xs",children:[e.jsx(S,{className:"h-3 w-3 mr-1"}),"Available"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-medium",children:["₱",s.totalAmount.toLocaleString()]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[s.itemCount," items"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Supplier: "}),e.jsx("span",{children:s.supplierName})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Transactions: "}),e.jsx("span",{children:s.transactions.length})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Items:"}),e.jsxs("div",{className:"grid grid-cols-1 gap-1 text-xs",children:[s.transactions.slice(0,3).map((t,l)=>e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:t.model}),e.jsxs("span",{children:[t.quantity," × ₱",t.unit_price]})]},l)),s.transactions.length>3&&e.jsxs("div",{className:"text-muted-foreground",children:["+",s.transactions.length-3," more items..."]})]})]})]})]})},s.poNumber))})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[e.jsx(n,{variant:"outline",onClick:m,children:"Cancel"}),e.jsx(n,{onClick:o,disabled:a.size===0||r,children:r?"Importing...":`Import ${a.size} Purchase Orders`})]})]})})};export{D as PurchaseOrderImportModal};
//# sourceMappingURL=PurchaseOrderImportModal-NwX-4I7c.js.map
