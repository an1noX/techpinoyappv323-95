import{r as x,j as e,S as f,q as N,v,w as y,x as l,P as F}from"./index-FgfazPn4.js";import{I as o}from"./input-Cc5DIsqr.js";import{C as T,T as O}from"./label-C7AHjZf1.js";import{u as z}from"./usePurchaseOrdersEnhanced-5S0vZqYc.js";import{F as h}from"./file-text-hP0IkulY.js";import{M as w}from"./minus-QEom8Zbo.js";import{U as D}from"./user-L0Nw7dze.js";const R=({isOpen:_,onClose:d,onSuccess:c})=>{const{createPurchaseOrder:C}=z(),[b,g]=x.useState(!1),[r,n]=x.useState({supplier_name:"",status:"pending",payment_status:"unpaid",notes:""}),[i,m]=x.useState([{model:"",quantity:1,unit_price:0}]),P=async t=>{t.preventDefault(),g(!0);try{const s={supplier_name:r.supplier_name,status:r.status,payment_status:r.payment_status,notes:r.notes,items:i.filter(a=>a.model&&a.quantity>0)};await C(s),c==null||c(),d()}catch(s){console.error("Error creating purchase order:",s)}finally{g(!1)}},u=(t,s,a)=>{m(p=>p.map((j,S)=>S===t?{...j,[s]:a}:j))},k=()=>{m(t=>[...t,{model:"",quantity:1,unit_price:0}])},q=t=>{m(s=>s.filter((a,p)=>p!==t))},I=()=>i.reduce((t,s)=>t+s.quantity*s.unit_price,0);return _?e.jsxs("div",{className:"fixed inset-0 z-[9999] flex flex-col bg-gradient-to-br from-purple-50 to-violet-50 animate-in fade-in-0 slide-in-from-bottom-8",children:[e.jsxs("div",{className:"sticky top-0 z-10 bg-purple-100/90 p-4 flex items-center justify-between border-b border-purple-200 rounded-b-xl shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(h,{className:"w-6 h-6 text-purple-500"}),e.jsx("span",{className:"text-lg font-semibold",children:"New Purchase Order"})]}),e.jsx("button",{onClick:d,className:"p-2 rounded-full hover:bg-purple-200 transition","aria-label":"Close",children:e.jsx(w,{className:"h-5 w-5 text-purple-500"})})]}),e.jsxs("form",{onSubmit:P,className:"flex-1 overflow-y-auto p-4 space-y-6 pb-28 sm:pb-8",children:[e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-violet-50 rounded-xl p-4 space-y-4 border border-purple-100",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(D,{className:"w-5 h-5 text-purple-400"}),e.jsx("label",{className:"block text-base font-semibold",children:"Supplier Name"})]}),e.jsx(o,{id:"supplier_name",value:r.supplier_name,onChange:t=>n(s=>({...s,supplier_name:t.target.value})),required:!0,className:"h-12 text-base"}),e.jsxs("div",{className:"flex items-center gap-3 mt-4",children:[e.jsx(T,{className:"w-5 h-5 text-purple-400"}),e.jsx("label",{className:"block text-base font-semibold",children:"Status"})]}),e.jsxs(f,{value:r.status,onValueChange:t=>n(s=>({...s,status:t})),children:[e.jsx(N,{className:"h-12 text-base border border-purple-200",children:e.jsx(v,{})}),e.jsxs(y,{children:[e.jsx(l,{value:"pending",children:"Pending"}),e.jsx(l,{value:"partial",children:"Partial"}),e.jsx(l,{value:"completed",children:"Completed"})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-violet-50 rounded-xl p-4 space-y-4 border border-purple-100",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(h,{className:"w-5 h-5 text-purple-400"}),e.jsx("label",{className:"block text-base font-semibold",children:"Payment Status"})]}),e.jsxs(f,{value:r.payment_status,onValueChange:t=>n(s=>({...s,payment_status:t})),children:[e.jsx(N,{className:"h-12 text-base border border-purple-200",children:e.jsx(v,{})}),e.jsxs(y,{children:[e.jsx(l,{value:"unpaid",children:"Unpaid"}),e.jsx(l,{value:"partial",children:"Partial"}),e.jsx(l,{value:"paid",children:"Paid"})]})]}),e.jsx("label",{className:"block text-base font-semibold mt-4",children:"Notes"}),e.jsx(O,{id:"notes",placeholder:"Optional notes",value:r.notes,onChange:t=>n(s=>({...s,notes:t.target.value})),className:"h-12 text-base"})]}),e.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-amber-50 rounded-xl p-4 border border-orange-100 space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("label",{className:"block text-base font-semibold flex items-center gap-2",children:[e.jsx(h,{className:"w-5 h-5 text-orange-400"}),"Items"]}),e.jsxs("button",{type:"button",className:"h-12 px-4 rounded-lg bg-orange-600 hover:bg-orange-700 text-white font-semibold shadow transition flex items-center gap-2",onClick:k,children:[e.jsx(F,{size:18})," Add Item"]})]}),i.map((t,s)=>e.jsxs("div",{className:"border rounded-xl p-4 space-y-3 bg-white",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("h4",{className:"font-medium",children:["Item ",s+1]}),i.length>1&&e.jsx("button",{type:"button",className:"h-10 w-10 flex items-center justify-center rounded-full bg-gray-100 hover:bg-gray-200 text-gray-600",onClick:()=>q(s),children:e.jsx(w,{size:18})})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium",children:"Model/Product"}),e.jsx(o,{placeholder:"Product model",value:t.model||"",onChange:a=>u(s,"model",a.target.value),required:!0,className:"h-12 text-base"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium",children:"Quantity"}),e.jsx(o,{type:"number",min:"1",value:t.quantity,onChange:a=>u(s,"quantity",parseInt(a.target.value)||1),required:!0,className:"h-12 text-base"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium",children:"Unit Price"}),e.jsx(o,{type:"number",min:"0",step:"0.01",value:t.unit_price,onChange:a=>u(s,"unit_price",parseFloat(a.target.value)||0),required:!0,className:"h-12 text-base"})]})]}),e.jsxs("div",{className:"text-right text-sm text-gray-600",children:["Subtotal: ₱",(t.quantity*t.unit_price).toFixed(2)]})]},s)),e.jsx("div",{className:"text-right border-t pt-3",children:e.jsxs("div",{className:"text-lg font-semibold",children:["Total: ₱",I().toFixed(2)]})})]}),e.jsxs("div",{className:"bg-white border-t border-orange-100 p-4 flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 rounded-t-xl mt-4",children:[e.jsx("button",{type:"button",className:"h-12 px-6 rounded-lg bg-gray-100 hover:bg-gray-200 text-gray-700 font-semibold w-full sm:w-auto",onClick:d,children:"Cancel"}),e.jsx("button",{type:"submit",className:"h-12 px-6 rounded-lg bg-orange-600 hover:bg-orange-700 text-white font-semibold w-full sm:w-auto",disabled:b,children:b?"Creating...":"Create Purchase Order"})]})]})]}):null};export{R as A};
//# sourceMappingURL=AddPurchaseModal-DW33EB1L.js.map
